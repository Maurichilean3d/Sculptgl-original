!function(t){"use strict";if(t.zWorkerInitialized)throw new Error("z-worker.js should be run only once");t.zWorkerInitialized=!0,addEventListener("message",function(t){var r=t.data,c=r.type,n=r.sn,o=e[c];if(o)try{o(r)}catch(t){!function(t,e,r){var c={type:t,sn:e,error:s(r)};postMessage(c)}(c,n,t)}});var e={importScripts:function(t){t.scripts&&t.scripts.length>0&&importScripts.apply(void 0,t.scripts),postMessage({type:"importScripts"})},newTask:c,append:o,flush:o},r={};function c(e){var c=t[e.codecClass],n=e.sn;if(r[n])throw Error("duplicated sn");r[n]={codec:new c(e.options),crcInput:"input"===e.crcType,crcOutput:"output"===e.crcType,crc:new p},postMessage({type:"newTask",sn:n})}var n=t.performance?t.performance.now.bind(t.performance):Date.now;function o(t){var e=t.sn,o=t.type,s=t.data,p=r[e];!p&&t.codecClass&&(c(t),p=r[e]);var a,i="append"===o,u=n();if(i)try{a=p.codec.append(s,function(t){postMessage({type:"progress",sn:e,loaded:t})})}catch(t){throw delete r[e],t}else delete r[e],a=p.codec.flush();var f=n()-u;u=n(),s&&p.crcInput&&p.crc.append(s),a&&p.crcOutput&&p.crc.append(a);var d=n()-u,l={type:o,sn:e,codecTime:f,crcTime:d},h=[];a&&(l.data=a,h.push(a.buffer)),i||!p.crcInput&&!p.crcOutput||(l.crc=p.crc.get()),postMessage(l,h)}function s(t){return{message:t.message,stack:t.stack}}function p(){this.crc=-1}function a(){}p.prototype.append=function(t){for(var e=0|this.crc,r=this.table,c=0,n=0|t.length;c<n;c++)e=e>>>8^r[255&(e^t[c])];this.crc=e},p.prototype.get=function(){return~this.crc},p.prototype.table=function(){var t,e,r,c=[];for(t=0;t<256;t++){for(r=t,e=0;e<8;e++)1&r?r=r>>>1^3988292384:r>>>=1;c[t]=r}return c}(),t.NOOP=a,a.prototype.append=function(t,e){return t},a.prototype.flush=function(){}}(this);